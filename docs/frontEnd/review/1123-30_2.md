# å‰ç«¯çˆ±å¥½è€…å­¦ä¹ å‘¨åˆŠï¼šç¬¬4æœŸ

>2019-11-30
<tag-part tagName="html"/><tag-part tagName="css"/><tag-part tagName="js"/>

[[toc]]


## ã€JavaScriptã€‘ï¼š

### 1. WebSocket åŸç†æµ…æä¸å®ç°ç®€å•èŠå¤©

[WebSocket åŸç†æµ…æä¸å®ç°ç®€å•èŠå¤©
](https://juejin.im/post/5dd4b991e51d450818244c30)

http1.x åªèƒ½å®¢æˆ·ç«¯å‘èµ·ï¼Œä¸èƒ½æœåŠ¡å™¨ä¸»åŠ¨æ¨é€ã€‚

* è½®è¯¢å®ç°æ¨é€

### 2. (?.è¿ç®—ç¬¦)@babel/plugin-proposal-optional-chaining

[JSæ“ä½œå°æŠ€å·§ï¼Œå·¥ä½œç®€å•äº†](https://juejin.im/post/5dd4a4015188252a18737535)

`?.`æ“ä½œç¬¦ä¹‹å‰è¯´æ˜¯ç›®å‰åœ¨è¯•éªŒé˜¶æ®µï¼Œçœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œé€šè¿‡åŠ è¿™ä¸ªbabelæ’ä»¶å¯ç”¨ï¼Œç«‹é©¬æƒ³å°é²œï¼›åœ¨åŸæœ‰é¡¹ç›®ä¸Šå®‰è£…æ—¶ï¼ŒæŠ¥é”™ï¼Œè¯´è¦æ±‚babel-coreè¦æ˜¯7.0.0ç‰ˆæœ¬çš„ï¼Œï¼ˆæ­¤æ—¶ä¸º6.26.3ï¼‰ï¼ŒæŒ‰ç™¾åº¦è£…äº† babel-core@^7.0.0-bridge.0 ç«‹é©¬å°±æŠ¥å‡ºæ–°çš„é—®é¢˜ï¼Œbabelä»¥åŠå‡ ä¸ªæ’ä»¶çš„ç‰ˆæœ¬æœ‰6ç‚¹å‡ çš„ è¿˜æœ‰7ç‚¹å‡ çš„ï¼Œç‰ˆæœ¬ä¸å…¼å®¹ã€‚é—®é¢˜åˆå‡ºæ¥äº†ï¼›ã€‚ã€‚ã€‚ã€‚é‰´äºæ—¶é—´é—®é¢˜ï¼Œæ”¹å¤©æ¥ç€ç ”ç©¶â€”â€”â€”â€”


```js
const obj = {
  foo: {
    bar: {
      baz: 42,
    },
  },
};

const baz = obj?.foo?.bar?.baz; // 42

const safe = obj?.qux?.baz; // undefined

```

```js

{
  "plugins": ["@babel/plugin-proposal-optional-chaining"]
}
```

*** 
***

**?.è¿ç®—ç¬¦**

>è¶…å“¥çš„æ¡†æ¶é…ç½®ä¸­ï¼Œå±…ç„¶å·²ç»é…ç½®äº†è¿™ä¸ª`@babel/plugin-proposal-optional-chaining`,babelæ‰€æœ‰çš„éƒ½å‡çº§åˆ°7.xäº†ï¼Œç«Ÿç„¶ä¹‹å‰è¿˜æ²¡å‘ç°ï¼ŒğŸ˜„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨

[babel/plugin-proposal-optional-chainingä½¿ç”¨?.](https://www.cnblogs.com/ayujun/p/11612426.html)

```js
const customer={
    address:{
        city:'beijing',
        cityArr:['beijing','shanghai','nanjing'],
        street:'12'
    }
}
//å¯¹è±¡
const cityValOld= customer && customer.address && customer.address.city
const cityValNew= customer?.address?.city 
const zipcode= customer?.address?.zipcode

// æ•°ç»„
const cityArrOld=data && customer && customer.address 
&& customer.address.cityArr&& customer.address.cityArr[0]  

const cityArr0New=customer?.address?.cityArr?.[0]   
const cityArr5New=customer?.address?.cityArr?.[5]

const arrs = [1,2,3]
const newArrs = arrs?.map(item=>{
    return item
})

const {getValue}=this.props
getValue && getValue() 
getValue?.() 
```

ä¸è¿‡åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œvscodeä¸è®¤è¯†è¿™ä¸ª?. æ‰€ä»¥ä¸€ç›´æŠ¥çº¢ï¼Œçœ‹çš„äººå¥½éš¾å—ã€‚

![image.png](~@alias/review/review21.png)

é‚£ä¹ˆå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„æ–¹æ³•â€”â€”â€”â€”â€”â€”æˆ‘é‡‡å–åœ¨å½“å‰å·¥ä½œåŒºå»æ‰äº†javascriptçš„æ ¡éªŒã€‚ä¸æ€•ï¼Œå› ä¸ºå’±ä»¬æœ‰è¶…å“¥é…ç½®çš„eslintæ£€éªŒã€‚

![image.png](~@alias/review/review22.png)

> å¾—ï¼Œæé—®è¿˜æ˜¯æœ‰å¥½å¤„çš„ï¼Œç¬¬äºŒå¤©å°±æ”¶åˆ°äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•çš„å›ç­”ï¼š[ä½¿ç”¨?. å¥½åƒæ˜¯vscodeä¸€ç›´æŠ¥çº¢ï¼Œåº”è¯¥é…ç½®ä»€ä¹ˆï¼Ÿ](https://segmentfault.com/q/1010000021158723)

**ç»™vscodeå®‰è£…`JavaScript and TypeScript Nightly`æ’ä»¶å³å¯**

### 3. jså°æŠ€å·§

[JSæ“ä½œå°æŠ€å·§ï¼Œå·¥ä½œç®€å•äº†](https://juejin.im/post/5dd4a4015188252a18737535)



è§[jså°æŠ€å·§]

### 4.https

[æ¼«ç”»ï¼šä»€ä¹ˆæ˜¯ HTTPS åè®®ï¼Ÿ](https://juejin.im/post/5c889918e51d45346459994d)è¿™ç¯‡æ–‡ç« è®²çš„å¾ˆå¥½ï¼Œåé¢è¿˜æ˜¯éœ€è¦å¥½å¥½æ¶ˆåŒ–ä¸€ä¸‹ï¼›

**è¯„è®ºåŒºä¸€å¤§ç¥ç‚¹è¯„ï¼š**

* 1.0ç‰ˆæœ¬:ä¿¡æ¯åœ¨ç½‘ç»œä¸­è£¸å¥”ï¼ŒåŠ«æŒäººæƒ³æ€ä¹ˆæå°±æ€ä¹ˆæã€‚
* 2.0ç‰ˆæœ¬:åŠ«æŒäººæœ‰ç‚¹éš¾å—äº†ï¼Œå¿…é¡»åœ¨åˆšå¼€å§‹å»ºç«‹ä¼šè¯æ—¶å°±ç›‘å¬ï¼Œè·å–åˆ°å¯¹ç§°é’¥åŒ™è¿‡åæ‰èƒ½å¼€å§‹çæã€‚
* 3.0ç‰ˆæœ¬:åªæ˜¯åœ¨ä¼šè¯å»ºç«‹æ—¶å•çº¯çš„ç›‘å¬è¡Œä¸é€šäº†ï¼Œè¿˜éœ€è¦å·æ¢æ¢æŸ±ã€‚æŠŠè‡ªå·±çš„å…¬é’¥å‘ç»™å°ç°ï¼Œå°ç°æ‹¿åˆ°è¿™ä¸ªå¯†é’¥å°±å“¼å“§å“¼å“§çš„åŠ å¯†å¯¹ç§°å¯†é’¥äº†ï¼Œç„¶åå‘å‡ºå»åˆè¢«åŠ«æŒï¼ŒåŠ«æŒäººç”¨è‡ªå·±çš„ç§é’¥è§£å¼€ï¼Œæ‹¿åˆ°å¯¹ç§°å¯†é’¥ï¼Œå†ç”¨å°çº¢çš„å…¬é’¥åŠ å¯†å¯¹ç§°å¯†é’¥å‘ç»™å°çº¢ï¼Œå˜¿å˜¿è¿™æ ·å­å°±æ‹¿åˆ°ä»–ä¿©é€šè®¯ç”¨çš„å¯¹ç§°å¯†é’¥äº†ï¼Œè¿˜æ²¡æœ‰è¢«å‘ç°
* 4.0ç‰ˆæœ¬:å‡‰å‡‰ï¼Œä¸­é—´äººæ²¡åŠæ³•å·æ¢æ¢æŸ±äº†ï¼Œå°ç°ä»ç¬¬ä¸‰æ–¹å»æ‹¿å…¬é’¥ï¼Œæƒ³ä¸ªåŠæ³•æŠŠç¬¬ä¸‰æ–¹åŠ«æŒäº†?

### 5.jsäº‹ä»¶å¾ªç¯æœºåˆ¶
[jsäº‹ä»¶å¾ªç¯æœºåˆ¶](https://blog.csdn.net/qq_39207948/article/details/81671304)

JSæ˜¯å•çº¿ç¨‹ï¼ˆå¦‚æœä¸€ä¸ªçº¿ç¨‹åˆ DOMï¼Œä¸€ä¸ªçº¿ç¨‹å¢DOMï¼Œæµè§ˆå™¨å‚»é€¼äº†ï½æ‰€ä»¥åªèƒ½å•ç€äº†ï¼‰ï¼Œè™½ç„¶æœ‰webworkeré…±ç´«çš„å¤šçº¿ç¨‹å‡ºç°ï¼Œä½†ä¹Ÿæ˜¯åœ¨ä¸»çº¿ç¨‹çš„æ§åˆ¶ä¸‹ã€‚webworkerä»…ä»…èƒ½è¿›è¡Œè®¡ç®—ä»»åŠ¡ï¼Œä¸èƒ½æ“ä½œDOMï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šè¿˜æ˜¯å•çº¿ç¨‹ã€‚

ã€€ã€€å•çº¿ç¨‹å³ä»»åŠ¡æ˜¯ä¸²è¡Œçš„ï¼Œåä¸€ä¸ªä»»åŠ¡éœ€è¦ç­‰å¾…å‰ä¸€ä¸ªä»»åŠ¡çš„æ‰§è¡Œï¼Œè¿™å°±å¯èƒ½å‡ºç°é•¿æ—¶é—´çš„ç­‰å¾…ã€‚ä½†ç”±äºç±»ä¼¼ajaxç½‘ç»œè¯·æ±‚ã€setTimeoutæ—¶é—´å»¶è¿Ÿã€DOMäº‹ä»¶çš„ç”¨æˆ·äº¤äº’ç­‰ï¼Œè¿™äº›ä»»åŠ¡å¹¶ä¸æ¶ˆè€— CPUï¼Œæ˜¯ä¸€ç§ç©ºç­‰ï¼Œèµ„æºæµªè´¹ï¼Œå› æ­¤å‡ºç°äº†å¼‚æ­¥ã€‚é€šè¿‡å°†ä»»åŠ¡äº¤ç»™ç›¸åº”çš„å¼‚æ­¥æ¨¡å—å»å¤„ç†ï¼Œä¸»çº¿ç¨‹çš„æ•ˆç‡å¤§å¤§æå‡ï¼Œå¯ä»¥å¹¶è¡Œçš„å»å¤„ç†å…¶ä»–çš„æ“ä½œã€‚å½“å¼‚æ­¥å¤„ç†å®Œæˆï¼Œä¸»çº¿ç¨‹ç©ºé—²æ—¶ï¼Œä¸»çº¿ç¨‹è¯»å–ç›¸åº”çš„callbackï¼Œè¿›è¡Œåç»­çš„æ“ä½œï¼Œæœ€å¤§ç¨‹åº¦çš„åˆ©ç”¨CPUã€‚æ­¤æ—¶å‡ºç°äº†åŒæ­¥æ‰§è¡Œå’Œå¼‚æ­¥æ‰§è¡Œçš„æ¦‚å¿µï¼ŒåŒæ­¥æ‰§è¡Œæ˜¯ä¸»çº¿ç¨‹æŒ‰ç…§é¡ºåºï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼›å¼‚æ­¥æ‰§è¡Œå°±æ˜¯cpuè·³è¿‡ç­‰å¾…ï¼Œå…ˆå¤„ç†åç»­çš„ä»»åŠ¡ï¼ˆCPUä¸ç½‘ç»œæ¨¡å—ã€timerç­‰å¹¶è¡Œè¿›è¡Œä»»åŠ¡ï¼‰ã€‚ç”±æ­¤äº§ç”Ÿäº†ä»»åŠ¡é˜Ÿåˆ—ä¸äº‹ä»¶å¾ªç¯ï¼Œæ¥åè°ƒä¸»çº¿ç¨‹ä¸å¼‚æ­¥æ¨¡å—ä¹‹é—´çš„å·¥ä½œã€‚
ã€€ã€€
![image.png](~@alias/review/review23.png)

**ä»»åŠ¡é˜Ÿåˆ—**ï¼š
ä»»åŠ¡é˜Ÿåˆ—å­˜åœ¨ä¸¤ç§ç±»å‹ï¼Œä¸€ç§ä¸ºmicrotask queueï¼Œå¦ä¸€ç§ä¸ºmacrotask queueã€‚

å›¾ä¸­æ‰€åˆ—å‡ºçš„ä»»åŠ¡é˜Ÿåˆ—å‡ä¸ºmacrotask queueï¼Œè€ŒES6 çš„ promiseï¼»ECMAScriptæ ‡å‡†ï¼½äº§ç”Ÿçš„ä»»åŠ¡é˜Ÿåˆ—ä¸ºmicrotask queueã€‚

* microtask queueï¼šå”¯ä¸€ï¼Œæ•´ä¸ªäº‹ä»¶å¾ªç¯å½“ä¸­ï¼Œä»…å­˜åœ¨ä¸€ä¸ªï¼›æ‰§è¡Œä¸ºåŒæ­¥ï¼ŒåŒä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­çš„microtaskä¼šæŒ‰é˜Ÿåˆ—é¡ºåºï¼Œä¸²è¡Œæ‰§è¡Œå®Œæ¯•ï¼›

* macrotask queueï¼šä¸å”¯ä¸€ï¼Œå­˜åœ¨ä¸€å®šçš„ä¼˜å…ˆçº§ï¼ˆç”¨æˆ·I/Oéƒ¨åˆ†ä¼˜å…ˆçº§æ›´é«˜ï¼‰ï¼›å¼‚æ­¥æ‰§è¡Œï¼ŒåŒä¸€äº‹ä»¶å¾ªç¯ä¸­ï¼Œåªæ‰§è¡Œä¸€ä¸ªã€‚

```js
console.log('1, time = ' + new Date().toString())
setTimeout(macroCallback, 0);
new Promise(function(resolve, reject) {
    console.log('2, time = ' + new Date().toString())
    resolve();
    console.log('3, time = ' + new Date().toString())
}).then(microCallback);

function macroCallback() {
    console.log('4, time = ' + new Date().toString())
} 

function microCallback() {
    console.log('5, time = ' + new Date().toString())
}     
```

åŒæ­¥ç¯å¢ƒï¼š1 -> 2 -> 3

äº‹ä»¶å¾ªç¯1ï¼ˆmicroCallbackï¼‰ï¼š5

äº‹ä»¶å¾ªç¯2ï¼ˆmacroCallbackï¼‰ï¼š4


### 6. é—­åŒ…

#### å®šä¹‰

* 1.èƒ½è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡çš„å‡½æ•°
* 2.èƒ½è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œå³ä½¿å¤–éƒ¨ä½œç”¨åŸŸå·²ç»è¿”å›ï¼ˆreturnï¼‰[returnä¹‹åæœ¬åº”è¯¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶äº†çš„ï¼Œå¯æ˜¯ä»ç„¶è¢«å…¶å†…çš„å‡½æ•°å¼•ç”¨å˜é‡ï¼Œæ‰€ä»¥å˜é‡æ²¡æœ‰è¢«å›æ”¶]
* 3.é—­åŒ…å¯ä»¥æ›´æ–°å¤–éƒ¨å˜é‡çš„å€¼

#### **é—­åŒ…ä¸­çš„å˜é‡**ï¼š

[æ·±å…¥javascriptâ€”â€”ä½œç”¨åŸŸå’Œé—­åŒ…](https://segmentfault.com/a/1190000000618597)

åœ¨ä½¿ç”¨é—­åŒ…æ—¶ï¼Œç”±äºä½œç”¨åŸŸé“¾æœºåˆ¶çš„å½±å“ï¼Œé—­åŒ…åªèƒ½å–å¾—å†…éƒ¨å‡½æ•°çš„æœ€åä¸€ä¸ªå€¼ï¼Œè¿™å¼•èµ·çš„ä¸€ä¸ªå‰¯ä½œç”¨å°±æ˜¯å¦‚æœå†…éƒ¨å‡½æ•°åœ¨ä¸€ä¸ªå¾ªç¯ä¸­ï¼Œé‚£ä¹ˆå˜é‡çš„å€¼å§‹ç»ˆä¸ºæœ€åä¸€ä¸ªå€¼

#### **é—­åŒ…çš„ä½œç”¨**ï¼š

é—­åŒ…å¸¸å¸¸ç”¨æ¥ã€Œé—´æ¥è®¿é—®ä¸€ä¸ªå˜é‡ã€ã€‚æ¢å¥è¯è¯´ï¼Œã€Œéšè—ä¸€ä¸ªå˜é‡ã€

***

#### **[ã€Œæ¯æ—¥ä¸€é¢˜ã€JS ä¸­çš„é—­åŒ…æ˜¯ä»€ä¹ˆï¼Ÿ](https://zhuanlan.zhihu.com/p/22486908?utm_source=wechat_session&utm_medium=social&utm_oi=34139113783296)**
è¿™ç¯‡æ–‡ç« çš„è®²è§£é€šä¿—æ˜“æ‡‚ï¼ŒæŒºå¥½ï¼Œæ¨èã€‚

**ä½œè€…å¦‚æ˜¯è¯´ï¼š**
> ã€Œå‡½æ•°ã€å’Œã€Œå‡½æ•°å†…éƒ¨èƒ½è®¿é—®åˆ°çš„å˜é‡ã€ï¼ˆä¹Ÿå«ç¯å¢ƒï¼‰çš„æ€»å’Œï¼Œå°±æ˜¯ä¸€ä¸ªé—­åŒ…
> 
>  é—­åŒ…é€šå¸¸å‡½æ•°å¥—å‡½æ•°ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ----æ˜¯å› ä¸ºéœ€è¦å±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥æ‰æŠŠ local æ”¾åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œå¦‚æœä¸æŠŠ local æ”¾åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œlocal å°±æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡äº†ï¼Œè¾¾ä¸åˆ°ä½¿ç”¨é—­åŒ…çš„ç›®çš„â€”â€”éšè—å˜é‡ï¼›ä¸ºä»€ä¹ˆè¦ return bar å‘¢ï¼Ÿå› ä¸ºå¦‚æœä¸ returnï¼Œä½ å°±æ— æ³•ä½¿ç”¨è¿™ä¸ªé—­åŒ…ã€‚æŠŠ return bar æ”¹æˆ window.bar = bar ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªè¦è®©å¤–é¢å¯ä»¥è®¿é—®åˆ°è¿™ä¸ª bar å‡½æ•°å°±è¡Œäº†ã€‚æ‰€ä»¥ return bar åªæ˜¯ä¸ºäº† bar èƒ½è¢«ä½¿ç”¨ï¼Œä¹Ÿè·Ÿé—­åŒ…æ— å…³

> é—­åŒ…ä¼šé€ æˆå†…å­˜æ³„éœ²ï¼Ÿé”™ã€‚è¯´è¿™è¯çš„äººæ ¹æœ¬ä¸çŸ¥é“ä»€ä¹ˆæ˜¯å†…å­˜æ³„éœ²ã€‚å†…å­˜æ³„éœ²æ˜¯æŒ‡ä½ ç”¨ä¸åˆ°ï¼ˆè®¿é—®ä¸åˆ°ï¼‰çš„å˜é‡ï¼Œä¾ç„¶å å±…ç€å†…å­˜ç©ºé—´ï¼Œä¸èƒ½è¢«å†æ¬¡åˆ©ç”¨èµ·æ¥ã€‚é—­åŒ…é‡Œé¢çš„å˜é‡æ˜æ˜å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å˜é‡ï¼ˆlivesï¼‰ï¼Œå‡­ä»€ä¹ˆè¯´æ˜¯å†…å­˜æ³„éœ²ï¼Ÿè¿™ä¸ªè°£è¨€æ˜¯å¦‚ä½•æ¥çš„ï¼Ÿå› ä¸º IEã€‚IE æœ‰ bugï¼ŒIE åœ¨æˆ‘ä»¬ä½¿ç”¨å®Œé—­åŒ…ä¹‹åï¼Œä¾ç„¶å›æ”¶ä¸äº†é—­åŒ…é‡Œé¢å¼•ç”¨çš„å˜é‡

***
#### **[ä»ä½œç”¨åŸŸé“¾è°ˆé—­åŒ…](https://github.com/dwqs/blog/issues/18)**
è¿™ç¯‡æ–‡ç« ä»ä½œç”¨åŸŸçš„æ–¹å‘æ¢³ç†äº†é—­åŒ…ã€‚æ¯æ®µä»£ç çš„æ‰§è¡Œå­˜åœ¨ä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œæ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½ä¼šé¡ºç€ä½œç”¨åŸŸé“¾å»æŸ¥æ‰¾å˜é‡ï¼Œä¸€ç›´å‘ä¸Šã€‚æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼Œé‡Œé¢å­˜ç€å½“å‰ä½œç”¨åŸŸçš„å˜é‡å’Œå‡½æ•°ï¼Œè¿™ä¸ªå¯¹è±¡å°±åƒæ‰§è¡Œç¯å¢ƒçš„ä¸€ä¸ªå­˜å‚¨ç®¡ç†å™¨ï¼Œç”¨çš„æ—¶å€™åªç®¡å»è¿™é‡Œæ‹¿ã€‚

**ä½œè€…å¦‚æ˜¯è¯´ï¼š**

> **Javascriptä¸­çš„ä½œç”¨åŸŸé“¾**ï¼šJavascriptä¸­æœ‰ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒ(execution context)çš„æ¦‚å¿µï¼Œå®ƒå®šä¹‰äº†å˜é‡æˆ–å‡½æ•°æœ‰æƒè®¿é—®çš„å…¶å®ƒæ•°æ®ï¼Œå†³å®šäº†ä»–ä»¬å„è‡ªçš„è¡Œä¸ºã€‚æ¯ä¸ªæ‰§è¡Œç¯å¢ƒéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„å˜é‡å¯¹è±¡ï¼Œç¯å¢ƒä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°éƒ½ä¿å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚ä½ å¯ä»¥æŠŠå®ƒå½“åšJavascriptçš„ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œä½†æ˜¯ä½ åªèƒ½ä¿®æ”¹å®ƒçš„å±æ€§ï¼Œå´ä¸èƒ½å¼•ç”¨å®ƒã€‚

> å˜é‡å¯¹è±¡ä¹Ÿæ˜¯æœ‰çˆ¶ä½œç”¨åŸŸçš„ã€‚å½“è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼Œè§£é‡Šå™¨ä¼šé¦–å…ˆåœ¨å½“å‰ä½œç”¨åŸŸæŸ¥æ‰¾æ ‡ç¤ºç¬¦ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±å»çˆ¶ä½œç”¨åŸŸæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡çš„æ ‡ç¤ºç¬¦æˆ–è€…ä¸å†å­˜åœ¨çˆ¶ä½œç”¨åŸŸäº†ï¼Œè¿™å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚

> ä½œç”¨åŸŸé“¾å’ŒåŸå‹ç»§æ‰¿æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†åˆæœ‰ç‚¹å°åŒºåˆ«ï¼šå¦‚æœå»æŸ¥æ‰¾ä¸€ä¸ªæ™®é€šå¯¹è±¡çš„å±æ€§æ—¶ï¼Œåœ¨å½“å‰å¯¹è±¡å’Œå…¶åŸå‹ä¸­éƒ½æ‰¾ä¸åˆ°æ—¶ï¼Œä¼šè¿”å›undefinedï¼›ä½†æŸ¥æ‰¾çš„å±æ€§åœ¨ä½œç”¨åŸŸé“¾ä¸­ä¸å­˜åœ¨çš„è¯å°±ä¼šæŠ›å‡ºReferenceErrorã€‚

> ä½œç”¨åŸŸé“¾çš„é¡¶ç«¯æ˜¯å…¨å±€å¯¹è±¡ã€‚å¯¹äºå…¨å±€ç¯å¢ƒä¸­çš„ä»£ç ï¼Œä½œç”¨åŸŸé“¾åªåŒ…å«ä¸€ä¸ªå…ƒç´ ï¼šå…¨å±€å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œåœ¨å…¨å±€ç¯å¢ƒä¸­å®šä¹‰å˜é‡çš„æ—¶å€™ï¼Œå®ƒä»¬å°±ä¼šè¢«å®šä¹‰åˆ°å…¨å±€å¯¹è±¡ä¸­ã€‚å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä½œç”¨åŸŸé“¾å°±ä¼šåŒ…å«å¤šä¸ªä½œç”¨åŸŸå¯¹è±¡ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½œè€…é€šè¿‡ç”»æ‰§è¡Œä½œç”¨åŸŸå›¾ï¼Œå±•ç¤ºäº†é—­åŒ…;

***

#### [JavaScript ä¸­ é—­åŒ… çš„è¯¦è§£](https://zhuanlan.zhihu.com/p/25945249?utm_source=wechat_session&utm_medium=social&utm_oi=34139113783296)

å˜é‡ç”Ÿå­˜å‘¨æœŸ---é—­åŒ…ï¼Œå¯¼è‡´äº† a çš„ç”Ÿå‘½å‘¨æœŸå»¶ç»­;

```js
var func = function(){
    var a = 'linxin';
    var func1 = function(){
        a += ' a';
        console.log(a);
    }
    return func1;
}
var func2 = func();
func2();                    // linxin a
func2();                    // linxin a a
func2();                    // linxin a a a
```

***

#### **é—­åŒ…é¢˜ç›®ç»å¸¸è§åˆ°çš„ä»£ç æ®µ**ï¼š

* æœ€ç®€å•çš„ä¸€ç§è¯´æ³•ï¼Œå‡½æ•°ä¸­å¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡

```js
var str = 'local'
function getStr() {
	console.log(str)
}
```

* å‡½æ•°åµŒå¥—

```js
function foo(){
  var local = 1
  function bar(){
    local++
    return local
  }
  return bar
}

var func = foo()
func() // 2
func() // 3
func() // 4
```
è°ƒç”¨fooå‡½æ•°ï¼Œæ‰§è¡Œï¼Œæœ¬æ¥return å‡½æ•°å†…éƒ¨çš„å˜é‡å°±è¦è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶äº†ï¼Œä½†æ˜¯localä»ç„¶è¢«barå¼•ç”¨ï¼Œæ— æ³•å›æ”¶ã€‚æ‰€ä»¥localå˜é‡ä¸€ç›´ä¸ºæ´»è·ƒçš„ã€‚

æ‰€ä»¥ä¹Ÿå°±ä¼šå‡ºç°ï¼Œè°ƒç”¨å¤šæ¬¡func(),æ¯æ¬¡å€¼éƒ½ä¼šå¢åŠ 1;

* ä¾ç„¶å‡½æ•°åµŒå¥—

```

"use strict";
function createCounter(initial) {
  var counter = initial;
  function increment(value) {
    counter += value;
  }
  function get() {
    return counter;
  }
  return {
    increment: increment,
    get: get
  };
}
var myCounter = createCounter(100);
console.log(myCounter.get());   // è¿”å› 100
myCounter.increment(5);
console.log(myCounter.get());   // è¿”å› 105

```

* å¸¦æœ‰å¾ªç¯çš„å†…éƒ¨å‡½æ•°

```js
function createClosure(){
    var result = [];
    for (var i = 0; i < 5; i++) {
        result[i] = function(){
            return i;
        }
    }
    return result;
}

createClosure()[0]()  // 5
createClosure()[1]()  // 5
createClosure()[2]()  // 5
createClosure()[3]()  // 5
createClosure()[4]()  // 5
```

å› ä¸ºæ¯ä¸ªå‡½æ•°çš„ä½œç”¨åŸŸé“¾ä¸­éƒ½ä¿å­˜ç€å¯¹å¤–éƒ¨å‡½æ•°ï¼ˆcreateClosureï¼‰çš„æ´»è·ƒå¯¹è±¡ï¼Œå› æ­¤ï¼Œä»–ä»¬éƒ½å¼•ç”¨ç€åŒä¸€å˜é‡iï¼Œå½“å¤–éƒ¨å‡½æ•°è¿”å›æ—¶ï¼Œæ­¤æ—¶çš„iå€¼ä¸º5ï¼Œæ‰€ä»¥å†…éƒ¨çš„æ¯ä¸ªå‡½æ•°içš„å€¼ä¹Ÿä¸º5ã€‚

æƒ³è¦è¾“å‡º0,1,2,3,4:----æ¢æˆç«‹å³æ‰§è¡Œå‡½æ•°

```js
function createClosure() {
    var result = [];
    for (var i = 0; i < 5; i++) {
        result[i] = function(num) {
            return function() {
                console.log(num);
            }
        }(i);
    }
    return result;
}
```

* å¸¦æœ‰å¾ªç¯çš„å¼‚æ­¥å‡½æ•°

```js
for (var i = 0; i < 4; i++) {
    setTimeout(function () {
        console.log(i)
    }, 0)
}
// ç»“æœ4ä¸ª4
```
setTimeout å‡½æ•°æ—¶å¼‚æ­¥çš„ï¼Œç­‰åˆ°å‡½æ•°æ‰§è¡Œæ—¶ï¼Œforå¾ªç¯å·²ç»ç»“æŸäº†ï¼Œæ­¤æ—¶çš„ i çš„å€¼ä¸º 4ï¼Œæ‰€ä»¥ function() { console.log(i) } å»æ‰¾å˜é‡ iï¼Œåªèƒ½æ‹¿åˆ° 4

è§£å†³è¿™ä¸ªçš„æ–¹æ³•ï¼š

```js
for (var i = 0; i < 4; i++) {
    (function (i) {
        setTimeout(function () {
            console.log(i)
        }, 0)
    })(i)
}
// 0 1 2 3 4
```

* å¾ªç¯å¼•ç”¨----å…³äºé—­åŒ…çš„å†…å­˜æ³„æ¼çš„ä¸€ç§è¯´æ³•ï¼š

```js
function bindEvent(){
    var target = document.getElementById("elem");
    target.onclick = function(){
        console.log(target.name);
    }
}
```

åŒ¿åå‡½æ•°å¯¹å¤–éƒ¨å¯¹è±¡targetäº§ç”Ÿä¸€ä¸ªå¼•ç”¨ï¼Œåªè¦æ˜¯åŒ¿åå‡½æ•°å­˜åœ¨ï¼Œè¿™ä¸ªå¼•ç”¨å°±ä¸ä¼šæ¶ˆå¤±ï¼Œå¤–éƒ¨å‡½æ•°çš„targetå¯¹è±¡ä¹Ÿä¸ä¼šè¢«é”€æ¯ï¼Œè¿™å°±äº§ç”Ÿäº†ä¸€ä¸ªå¾ªç¯å¼•ç”¨

[JavaScriptæ·±å…¥ä¹‹4ç±»å¸¸è§å†…å­˜æ³„æ¼åŠå¦‚ä½•é¿å…](https://www.muyiy.cn/blog/1/1.5.html#%E5%9B%9B%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84js%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F)è¿™ä¸ªä½œè€…æå‡ºäº†ï¼Œç°åœ¨ä½¿ç”¨çš„æ›´å…ˆè¿›çš„æ ‡è®°æ¸…é™¤åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä¸å†è¿™æ ·å†…å­˜æ³„æ¼

è§£å†³åŠæ³•ï¼š

```
function bindEvent(){
    var target = document.getElementById("elem");
    var name = target.name;
    target.onclick = function(){
        console.log(name);
    }
    target = null;
 }
```

* ç®€å•å¸¦ä¸€ç¬”é—­åŒ…ä¸­çš„this
> åé¢å¥½å¥½ç ”ç©¶ä¸€ä¸‹this

```js
var scope = "global";
var object = {
    scope:"local",
    getScope:function(){
        return function(){
            return this.scope;
        }
    }
}
```

è°ƒç”¨object.getScope()()è¿”å›å€¼ä¸ºglobal;


```js
var scope = "global";
var object = {
    scope:"local",
    getScope:function(){
        var that = this;
        return function(){
            return that.scope;
        }
    }
}
```

è°ƒç”¨ç»“æœä¸ºglobal

***
**é—­åŒ…ï¼Œæ‰§è¡Œæœºåˆ¶ç­‰**:

[Excuse meï¼Ÿè¿™ä¸ªå‰ç«¯é¢è¯•åœ¨æäº‹ï¼](https://zhuanlan.zhihu.com/p/25407758?utm_source=wechat_session&utm_medium=social&utm_oi=34139113783296%27)

```js
for (var i = 0; i < 5; i++) {
  setTimeout(function() {
    console.log(i);
  }, 1000 * i);
}
```
setTimeout ä¼šå»¶è¿Ÿæ‰§è¡Œï¼Œé‚£ä¹ˆæ‰§è¡Œåˆ° console.log çš„æ—¶å€™ï¼Œå…¶å® i å·²ç»å˜æˆ 5 äº†;æ¯éš”ä¸€ç§’å†è¾“å‡ºä¸€ä¸ª 5ï¼Œä¸€å…± 5 ä¸ª 5


åŠ ä¸ªé—­åŒ…ï¼Œå®ç°è¾“å‡º0åˆ°4ï¼š

```js
for (var i = 0; i < 5; i++) {
  (function(i) {
    setTimeout(function() {
      console.log(i);
    }, i * 1000);
  })(i);
}
```


```js
for (var i = 0; i < 5; i++) {
  (function() {
    setTimeout(function() {
      console.log(i);
    }, i * 1000);
  })(i);
}
```

è¿™æ ·å­çš„è¯ï¼Œå†…éƒ¨å…¶å®æ²¡æœ‰å¯¹ i ä¿æŒå¼•ç”¨ï¼Œå…¶å®ä¼šå˜æˆè¾“å‡º 5


```js
for (var i = 0; i < 5; i++) {
  setTimeout((function(i) {
    console.log(i);
  })(i), i * 1000);
}
```
è¿™é‡Œç»™ setTimeout ä¼ é€’äº†ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ã€‚é¢ï¼ŒsetTimeout å¯ä»¥æ¥å—å‡½æ•°æˆ–è€…å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆè¿™é‡Œç«‹å³æ‰§è¡Œå‡½æ•°æ˜¯ä¸ªå•¥å‘¢ï¼Œåº”è¯¥æ˜¯ä¸ª undefined ï¼Œä¹Ÿå°±æ˜¯è¯´ç­‰ä»·äºï¼š

`setTimeout(undefined, ...);`
è€Œç«‹å³æ‰§è¡Œå‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯ç«‹é©¬è¾“å‡ºçš„ã€‚ç«‹é©¬è¾“å‡º 0 åˆ° 4 


```js
setTimeout(function() {
  console.log(1)
}, 0);
new Promise(function executor(resolve) {
  console.log(2);
  for( var i=0 ; i<10000 ; i++ ) {
    i == 9999 && resolve();
  }
  console.log(3);
}).then(function() {
  console.log(4);
});
console.log(5);
```

è¿™é“é¢˜è€ƒå¯Ÿ JavaScript çš„è¿è¡Œæœºåˆ¶çš„---2 3 5 4 1

### 7.async
[æ·±å…¥æµ…å‡ºES6æ•™ç¨‹ã€asyncå‡½æ•°ã€](https://www.jianshu.com/p/631f9406c4e0)

**asyncå‡½æ•°çš„ç‰¹ç‚¹**ï¼š

* è¯­ä¹‰åŒ–å¼º
* é‡Œé¢çš„awaitåªèƒ½åœ¨asyncå‡½æ•°ä¸­ä½¿ç”¨
* awaitåé¢çš„è¯­å¥å¯ä»¥æ˜¯promiseå¯¹è±¡ã€æ•°å­—ã€å­—ç¬¦ä¸²ç­‰
* asyncå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªPromsieå¯¹è±¡
* awaitè¯­å¥åçš„Promiseå¯¹è±¡å˜æˆrejectçŠ¶æ€æ—¶ï¼Œæ•´ä¸ªasyncå‡½æ•°ä¼šä¸­æ–­ï¼Œåé¢çš„ç¨‹åºä¸ä¼šç»§ç»­æ‰§è¡Œ
* await è¯­å¥åçš„Promiseæ²¡æœ‰åªè¦æ²¡æœ‰resolveï¼Œåé¢çš„å°±ä¸ä¼šå†ç»§ç»­æ‰§è¡Œäº†

### 8.babel-plugin-transform-class-properties

è¿™ä¸ªæ’ä»¶åŠ ä¸Šï¼Œå¹¶åœ¨.babelrcä¸­æ·»åŠ æ­¤æ’ä»¶åï¼Œæ–¹å¯ç›´æ¥ä½¿ç”¨ç®­å¤´å‡½æ•°å†™reactä¸­çš„æ–¹æ³•
