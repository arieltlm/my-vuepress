{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{150:function(e,t,a){\"use strict\";a.r(t);var n=a(0),s=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"content\"},[a(\"h1\",{attrs:{id:\"daterangepicker-使用方法以及各种小bug修复\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#daterangepicker-使用方法以及各种小bug修复\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" daterangepicker 使用方法以及各种小bug修复\")]),a(\"p\",[e._v(\"双日历时间段选择插件 — daterangepicker是bootstrap框架后期的一个时间控件，可以设定多个时间段选项，也可以自定义时间段，由用户自己选择起始时间和终止时间，时间段的最大跨度可以在程序里设定。\")]),a(\"h2\",{attrs:{id:\"一、引用\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#一、引用\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" 一、引用\")]),a(\"p\",[e._v(\"daterangepicker依托monent.js 和jquery使用。所以在使用中在引入daterangepicker之前必须引入monent.js和jquery以及bootstrap。\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(' <script type=\"text/javascript\" src=\"jquery.js\"><\\/script>\\n<script type=\"text/javascript\" src=\"moment.js\"><\\/script>\\n<script type=\"text/javascript\" src=\"daterangepicker.js\"><\\/script>\\n<link rel=\"stylesheet\" type=\"text/css\" href=\"bootstrap.css\" />\\n<link rel=\"stylesheet\" type=\"text/css\" href=\"daterangepicker-bs3.css\" />\\n')])])]),a(\"p\",[e._v(\"或者在使用模块化编程时，比如使用seaj.js时，在整个代码压缩前面加入\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v('define(\"gallery/daterangepicker/1.3.7/daterangepicker\",[\"jquery\",\"moment\",\"./daterangepicker-bs3.css\"], function(a){a(\"jquery\");window.moment=a(\"moment\"),a(\"./daterangepicker-bs3.css\"),\\n')])])]),a(\"p\",[e._v(\"(中间可以加入daterangepicker.js的源代码）（此刻在项目中遇到，自己折腾的出来的，可用；还不通透，有待进步）\")]),a(\"p\",[e._v(\"最后面加入\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v('define(\"gallery/daterangepicker/1.3.7/daterangepicker-bs3.css\",[],function(){ 2     seajs.importStyle(\".daterangepicker{position:absolute;color:inherit;.........}\"\\n3 )}) 4 })\\n')])])]),a(\"h2\",{attrs:{id:\"二、使用\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#二、使用\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" 二、使用\")]),a(\"p\",[e._v(\"在使用中，需要注意datetimepicker的参数配置（这个在官网上都可以查到），此处我想说明的是，可以在官网上下载源码，根据其demo来配置参数了解其各个用处\")]),a(\"p\",[a(\"img\",{attrs:{src:\"http://upload-images.jianshu.io/upload_images/6230931-be168163ae890b69..png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\",alt:\"image\"}})]),a(\"p\",[e._v(\"在上面的复选框中通过选择，可以配置不同的参数。此处简单说明一下自己在项目中所用到的参数，以及使用方法。\")]),a(\"p\",[e._v(\"由于项目整个系统，存在双日期或者单日期，或者有时分秒或者无时分秒。所以两两组合分为四种情况。\")]),a(\"p\",[e._v(\"所以我使用以下：\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v('/**\\n * 日历\\n * @param obj eles 日期输入框\\n * @param boolean dobubble    是否为双日期（true）\\n * @param boolean secondNot    有无时分秒（有则true）\\n * @return none\\n */\\nfunction calenders(eles,dobubble,secondNot){\\n    var singleNot,formatDate;\\n    if(dobubble ==true){\\n        singleNot = false;\\n    }else{\\n        singleNot = true;\\n    }\\n    if(secondNot ==true){\\n        formatDate = \"YYYY-MM-DD HH:mm:ss\";\\n    }else{\\n        formatDate = \"YYYY-MM-DD\";\\n    }\\n    \\n    $(eles).daterangepicker({\\n        \"singleDatePicker\": singleNot,\\n        \"timePicker\": secondNot,\\n        \"timePicker24Hour\": secondNot,\\n        \"timePickerSeconds\": secondNot,\\n        \"showDropdowns\":true,\\n        \"timePickerIncrement\" :1,\\n        \"linkedCalendars\": false,\\n        \"autoApply\":true,\\n        \"autoUpdateInput\":false, \\n        \"locale\": {\\n            \"direction\": \"ltr\",\\n            \"format\": formatDate,\\n            \"separator\": \"~\",\\n            \"applyLabel\": \"Apply\",\\n            \"cancelLabel\": \"Cancel\",\\n            \"fromLabel\": \"From\",\\n            \"toLabel\": \"To\",\\n            \"customRangeLabel\": \"Custom\",\\n            \"daysOfWeek\": [\\n                \"Su\",\\n                \"Mo\",\\n                \"Tu\",\\n                \"We\",\\n                \"Th\",\\n                \"Fr\",\\n                \"Sa\"\\n            ],\\n            \"monthNames\": [\\n                \"一月\",\\n                 \"二月\",\\n                 \"三月\",\\n                 \"四月\",\\n                 \"五月\",\\n                 \"六月\",\\n                 \"七月\",\\n                 \"八月\",\\n                 \"九月\",\\n                 \"十月\",\\n                 \"十一月\",\\n                 \"十二月\"\\n            ],\\n            \"firstDay\": 1\\n        }\\n    }, function(start,end, label) {\\n        if(secondNot ==true&&dobubble ==true){\\n            $(eles).val($.trim(start.format(\\'YYYY-MM-DD HH:mm:ss\\')+\\'~\\'+end.format(\\'YYYY-MM-DD HH:mm:ss\\')));\\n        }else if(secondNot ==false&&dobubble ==true){\\n            $(eles).val($.trim(start.format(\\'YYYY-MM-DD\\')+\\'~\\'+ end.format(\\'YYYY-MM-DD\\')));\\n        }else if(secondNot ==false&&dobubble ==false){\\n             $(eles).val(start.format(\\'YYYY-MM-DD\\'));\\n        }else if(secondNot ==true&&dobubble ==false){\\n            $(eles).val(start.format(\\'YYYY-MM-DD HH:mm:ss\\'));\\n        }\\n    });\\n    //清空\\n    $(eles).siblings().click(function(){\\n        $(eles).val(\\'\\');\\n    })\\n}\\n')])])]),a(\"p\",[e._v(\"由于daterangepicker没有自带清空功能，而项目要求中，有时候日期框要为空，所以我在input框后面加了一个叉按钮。如下图效果，实现清空\")]),a(\"p\",[a(\"img\",{attrs:{src:\"http://upload-images.jianshu.io/upload_images/6230931-6a2a50267cd5c1b0..png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\",alt:\"image\"}})]),a(\"p\",[e._v(\"代码可以作为参考（这个有各种实现方式）\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(' <div class=\"input-group\">\\n     <input type=\"text\" name=\"extractionDate11\" id=\"extractionDate11\" class=\"form-control dateStart\" placeholder=\"请选择起始时间\" readonly size=\"30\">\\n    <div class=\"input-group-addon clearBtns\">x</div>\\n </div>\\n <span class=\"caret\"></span>\\n')])])]),a(\"p\",[e._v(\"而对于各种情况下的的引用：\")]),a(\"p\",[e._v(\"单日期不带时分秒： \"),a(\"code\",[e._v('calenders(\"#bgrq\",false,false);')])]),a(\"p\",[e._v(\"单日期带时分秒：\"),a(\"code\",[e._v(\"calenders('#inputDate',false,true);\")])]),a(\"p\",[e._v(\"双日期不带时分秒： \"),a(\"code\",[e._v(\"calenders('#extractionDate11',true,false);\")])]),a(\"p\",[e._v(\"双日期带时分秒：\"),a(\"code\",[e._v(\"calenders('#extractionDate11',true,true);\")])]),a(\"h2\",{attrs:{id:\"三、问题解决\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#三、问题解决\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" 三、问题解决\")]),a(\"h3\",{attrs:{id:\"_1、点开下拉日期框，点击空白处，日期框关闭，传值问题\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、点开下拉日期框，点击空白处，日期框关闭，传值问题\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" 1、点开下拉日期框，点击空白处，日期框关闭，传值问题\")]),a(\"p\",[e._v(\"由于daterangepicker所做的功能是：在点开下拉日期框后，点击页面其他地方，日期框关闭，此时之前所选的日期值就自动保存到日期框上，而我们的习惯时，这样的操作相当于取消，所以在源码上做一修改：\")]),a(\"p\",[e._v(\"在源码中搜索outsideClick方法：\")]),a(\"p\",[e._v(\"将其中的this.hide()替换。\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"outsideClick: function(e) {\\n    var target = $(e.target);\\n    // if the page is clicked anywhere except within the daterangerpicker/button\\n    // itself then call this.hide()\\n    if (\\n        // ie modal dialog fix\\n        e.type == \\\"focusin\\\" ||\\n        target.closest(this.element).length ||\\n        target.closest(this.container).length ||\\n        target.closest('.calendar-table').length\\n        ) return;\\n    // this.hide();\\n    if (this.isShowing){\\n        $(document).off('.daterangepicker');\\n        $(window).off('.daterangepicker');\\n        this.container.hide();\\n        this.element.trigger('hide.daterangepicker', this);\\n        this.isShowing = false;\\n    }\\n    this.element.trigger('outsideClick.daterangepicker', this);\\n},\\n\")])])]),a(\"p\",[e._v(\"同时，必须将show方法中的更改，否则当用户选择双日期时若只选择了一个日期然后点击空白处，而下一次再点击input框时就报错了，无法再使用了。\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"/*this.oldStartDate = this.startDate.clone();\\nthis.oldEndDate = this.endDate.clone();\\nthis.previousRightTime = this.endDate.clone();*/\\n\\nthis.oldStartDate = this.startDate;\\nthis.oldEndDate = this.endDate;\\nthis.previousRightTime = this.endDate;\\n\")])])]),a(\"h3\",{attrs:{id:\"_2、日期初始为空的问题\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、日期初始为空的问题\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" 2、日期初始为空的问题\")]),a(\"p\",[e._v('daterangepicker在初始时会给所绑定的input框自动赋值当前日期，即参数 \"autoUpdateInput\":true/false,  当其为true时会自动加上日期，在选择false时就初始为空，可是在后面选择日期后有的情况下不会自动应用。所以要做一些修改（此借鉴于博友http://blog.csdn.net/qq_33518042/article/details/77175645）此处我们更明晰一点')]),a(\"p\",[e._v(\"（引用：在此我们可以使用autoUpdateInput属性，autoUpdateInput是用来打开和关闭daterangepicker选择时，是否自动传值到input[text] 这个DOM的属性，通过设置初始autoUpdateInput为false，可以实现初始值为空，这是在input中设置的placeholder才能正常显现出来。但是设置该属性之后，不管怎么选择daterangePikcer的日期，都不会有传值到input中，也就是没有办法正常显示选择的日期了，所以要在恰当的时刻，调用$(id).data('daterangepicker').autoUpdateInput=true,就可以了。作者最初设置为，最初默认值为空，当daterangepicker 的input发生点击时，autoUpadateInput=true，但是这时出现input不管是否选中日期，都会自动有值，所以为了修改这个问题，我在daterangepicker的源码中进行了修改，当然也可以重新更改需要的onclick事件。\")]),a(\"p\",[e._v(\"在源码中，当autoUpdateInput设置为false之后，我们想要在点击确定，选中日期和点击range三个地方，将autoUpdateInput改变回来，所以，在三处设置this.autoUpdateInput=true属性）\")]),a(\"p\",[e._v(\"1）在1210行左右的clickRange方法中：添加可以如下对照以下代码：\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"clickRange: function(e) {\\n    var label = e.target.getAttribute('data-range-key');\\n    this.chosenLabel = label;\\n    if (label == this.locale.customRangeLabel) {\\n        this.showCalendars();\\n    // } else {\\n        }else if (!this.endDate && date.isBefore(this.startDate)) {\\n        this.autoUpdateInput=true;\\n            //special case: clicking the same date for start/end,\\n            //but the time of the end date is before the start date\\n            this.setEndDate(this.startDate.clone());\\n        } else { // picking end\\n        this.autoUpdateInput=true;\\n\\n\\n        var dates = this.ranges[label];\\n        this.startDate = dates[0];\\n        this.endDate = dates[1];\\n\\n        if (!this.timePicker) {\\n            this.startDate.startOf('day');\\n            this.endDate.endOf('day');\\n        }\\n\\n        if (!this.alwaysShowCalendars)\\n            this.hideCalendars();\\n        this.clickApply();\\n    }\\n},\\n\")])])]),a(\"p\",[e._v(\"2）、在1340行左右，两处添加  this.autoUpdateInput=true; 请对照以下：\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"} else if (!this.endDate && date.isBefore(this.startDate)) {\\n    this.autoUpdateInput=true;\\n    //special case: clicking the same date for start/end,\\n    //but the time of the end date is before the start date\\n    this.setEndDate(this.startDate.clone());\\n} else { // picking end\\n    this.autoUpdateInput=true;\\n    if (this.timePicker) {\\n        var hour = parseInt(this.container.find('.right .hourselect').val(), 10);\\n        if (!this.timePicker24Hour) {\\n            var ampm = this.container.find('.right .ampmselect').val();\\n            if (ampm === 'PM' && hour < 12)\\n                hour += 12;\\n            if (ampm === 'AM' && hour === 12)\\n                hour = 0;\\n        }\\n\")])])]),a(\"p\",[e._v(\"3）、在1400行左右，给clickApply方法中添加  this.autoUpdateInput=true;\")]),a(\"div\",{staticClass:\"language- extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[e._v(\"clickApply: function(e) {\\n   this.autoUpdateInput=true;\\n       this.hide();\\n     this.element.trigger('apply.daterangepicker', this);\\n},\\n\")])])]),a(\"p\",[a(\"img\",{attrs:{src:\"http://upload-images.jianshu.io/upload_images/6230931-74a3147afc112f51..png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\",alt:\"image\"}})]),a(\"p\",[a(\"img\",{attrs:{src:\"http://upload-images.jianshu.io/upload_images/6230931-6d1bcd8e287cb6b7..png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\",alt:\"image\"}})]),a(\"p\",[a(\"img\",{attrs:{src:\"http://upload-images.jianshu.io/upload_images/6230931-59134f7c1b70d36f..png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\",alt:\"image\"}})]),a(\"p\",[a(\"img\",{attrs:{src:\"http://upload-images.jianshu.io/upload_images/6230931-2adc8625ea3372d1..png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\",alt:\"image\"}})])])}],!1,null,null,null);t.default=s.exports}}]);","extractedComments":[]}