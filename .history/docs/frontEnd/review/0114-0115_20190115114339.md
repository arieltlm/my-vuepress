# 2019æ¥äº†ğŸ·

dllä¸node http/expressçš„ç†è§£å’Œå®è·µ
-----------------------
> 20190115

## 1.dll ï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰æ‰“åŒ…åŸç†

[å½»åº•è§£å†³Webpackæ‰“åŒ…æ€§èƒ½é—®é¢˜â€”â€”manifest.json](https://blog.csdn.net/suhuaiqiang_janlay/article/details/79715969)

**é—®é¢˜æå‡ºï¼š** 
webpackæ¯æ¬¡æ‰“åŒ…çš„æ—¶å€™ï¼Œæ— è®ºæ˜¯æ”¹å˜æ²¡æ”¹å˜çš„éƒ½è¦æ‰“åŒ…ä¸€éï¼Œå¯¹äºç¬¬ä¸‰æ–¹æ’ä»¶æˆ–è€…åº“æ¥è¯´ï¼Œæ‰“åŒ…å°±åšäº†é‡å¤çš„å·¥ä½œï¼Œå¢åŠ äº†æ—¶é—´ï¼Œå½±å“äº†æ€§èƒ½ã€‚

**é—®é¢˜è¯•è§£å†³ï¼š**

```js
module.exports = {
    externals: {
        'react': 'window.React'
    }
    //å…¶å®ƒé…ç½®å¿½ç•¥......
};

```

ä½¿ç”¨externalsæ¥å°†react è¿™ä¸ªæ¨¡å—å°±ä¸è¦æ‰“åŒ…å•¦ï¼Œç›´æ¥æŒ‡å‘ window.React å°±å¥½ã€‚ä¸è¿‡åˆ«å¿˜äº†åŠ è½½ react.min.jsï¼Œè®©å…¨å±€ä¸­æœ‰ React è¿™ä¸ªå˜é‡ã€‚

**é—®é¢˜å†å‡ºç°ï¼š**

å†åŠ å…¥ä¸€ä¸ªreactçš„ç›¸å…³æ’ä»¶åº“ä¹‹åï¼Œæ’ä»¶ä¸­æœ‰require('react')åï¼Œæ‰“åŒ…åˆä¼šæŠŠreactå†æ‰“åŒ…ä¸€éï¼›

**é—®é¢˜åˆçº§è§£å†³ï¼š**
æ‰‹å·¥æ‰“åŒ…è¿™äº› moduleï¼Œç„¶åè®¾ç½® externals ï¼Œè®© Webpack ä¸å†æ‰“åŒ…å®ƒä»¬ã€‚

æˆ‘ä»¬éœ€è¦è¿™æ ·ä¸€ä¸ª lib-bundle.js æ–‡ä»¶ï¼š
```js

window.__LIB["react"] = require("react");
window.__LIB["react-addons-css-transition-group"] = require("react-addons-css-transition-group");
// ...å…¶å®ƒä¾èµ–åŒ…

```
æˆ‘ä»¬åœ¨è¿™é‡ŒæŠŠä¸€äº›ç¬¬ä¸‰æ–¹åº“æ³¨å†Œåˆ°äº† window.__LIB ä¸‹ï¼Œè¿™äº›åº“å¯ä»¥ä½œä¸ºåº•å±‚çš„åŸºç¡€åº“ï¼Œå…äºé‡å¤æ‰“åŒ…ã€‚

ç„¶åæ‰§è¡Œ
```bash
webpack lib-bundle.js lib.js
```
å¾—åˆ°æ‰“åŒ…å¥½çš„ lib.jsã€‚ç„¶åå»è®¾ç½®æˆ‘ä»¬çš„ externals ï¼š
```js
var webpack = require('webpack');
module.exports = {
externals: {
        'react': 'window.__LIB["react"]',
        'react-addons-css-transition-group': 'window.__LIB["react-addons-css-transition-group"]',
        // å…¶å®ƒåº“
    }
    //å…¶å®ƒé…ç½®å¿½ç•¥...... 
};
```
è¿™æ—¶ç”±äº externals çš„å­˜åœ¨ï¼ŒWebpack æ‰“åŒ…çš„æ—¶å€™å°±ä¼šé¿å¼€è¿™äº›æ¨¡å—è¶…å¤šï¼Œä¾èµ–å…³ç³»å¤æ‚çš„åº“ï¼ŒæŠŠè¿™äº›ç¬¬ä¸‰æ–¹ module çš„å…¥å£æŒ‡å‘é¢„å…ˆæ‰“åŒ…å¥½çš„ lib.js çš„å…¥å£ window.__LIBï¼Œä»è€Œåªæ‰“åŒ…æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç ã€‚
**ç»ˆæè§£å†³æ–¹æ³•-dll:**

dll----åŠ¨æ€é“¾æ¥åº“ã€‚
dllä¸€ä¸ªçº¯å‡€çš„ä¾èµ–åº“ï¼Œæœ¬èº«ä¸èƒ½è¿è¡Œï¼Œæ˜¯ç”¨æ¥ç»™ä½ çš„appæˆ–è€…ä¸šåŠ¡ä»£ç å¼•ç”¨çš„ï¼›

â€”â€”â€”â€”webpack.DllPluginæ’ä»¶

* 1.æ‰“åŒ…dllåŒ…
* 2.å¼•ç”¨dllåŒ…ï¼Œæ‰“åŒ…ä¸šåŠ¡ä»£ç 

é¦–å…ˆæˆ‘ä»¬æ¥æ‰“åŒ…ddlåŒ…ï¼Œé¦–å…ˆé…ç½®ä¸€ä¸ªè¿™æ ·çš„ dll.config.jsï¼š
```js
const webpack = require('webpack');

const vendors = [
    'react',
    'react-dom',
    'react-router',
    // ...å…¶å®ƒåº“
];

module.exports = {
    output: {
        path: 'build',
        filename: '[name].js',
        library: '[name]',
    },
    entry: {
        "lib": vendors,
    },
    plugins: [
        new webpack.DllPlugin({
            path: 'manifest.json',
            name: '[name]',
            context: __dirname,
        }),
    ],
};
```
`webpack.DllPlugin` çš„é€‰é¡¹ä¸­ï¼š

* path æ˜¯ manifest.json æ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ï¼Œè¿™ä¸ªæ–‡ä»¶ä¼šç”¨äºåç»­çš„ä¸šåŠ¡ä»£ç æ‰“åŒ…ï¼›
* name æ˜¯ dll æš´éœ²çš„å¯¹è±¡åï¼Œè¦è·Ÿ output.library ä¿æŒä¸€è‡´ï¼›
* context æ˜¯è§£æåŒ…è·¯å¾„çš„ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ªè¦è·Ÿæ¥ä¸‹æ¥é…ç½®çš„ webpack.config.js ä¸€è‡´ã€‚
è¿è¡ŒWebpackï¼Œä¼šè¾“å‡ºä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªæ˜¯æ‰“åŒ…å¥½çš„ lib.jsï¼Œä¸€ä¸ªå°±æ˜¯ manifest.jsonï¼Œå®ƒé‡Œé¢çš„å†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š
```js
{
    "name": "vendor_ac51ba426d4f259b8b18",
    "content": {
        "./node_modules/react/react.js": 1,
        "./node_modules/react/lib/React.js": 2,
        "./node_modules/react/node_modules/object-assign/index.js": 3,
        "./node_modules/react/lib/ReactChildren.js": 4,
        "./node_modules/react/lib/PooledClass.js": 5,
        "./node_modules/react/lib/reactProdInvariant.js": 6,
        // ............
    }
}
```
æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥å¿«ä¹åœ°æ‰“åŒ…ä¸šåŠ¡ä»£ç å•¦ï¼Œé¦–å…ˆå†™å¥½æ‰“åŒ…é…ç½®æ–‡ä»¶ webpack.config.jsï¼š

```js
const webpack = require('webpack');
module.exports = {
    output: {
        path: 'build',
        filename: '[name].js',
    },
    entry: {
        app: './src/index.js',
    },
    plugins: [
        new webpack.DllReferencePlugin({
            context: __dirname,
            manifest: require('./manifest.json'),
        }),
    ],
};
```
`webpack.DllReferencePlugin` çš„é€‰é¡¹ä¸­ï¼š

* context éœ€è¦è·Ÿä¹‹å‰ä¿æŒä¸€è‡´ï¼Œè¿™ä¸ªç”¨æ¥æŒ‡å¯¼ Webpack åŒ¹é… manifest.json ä¸­åº“çš„è·¯å¾„ï¼›
* manifest ç”¨æ¥å¼•å…¥åˆšæ‰è¾“å‡ºçš„ manifest.json æ–‡ä»¶ã€‚
* DllPlugin æœ¬è´¨ä¸Šçš„åšæ³•å’Œæˆ‘ä»¬æ‰‹åŠ¨åˆ†ç¦»è¿™äº›ç¬¬ä¸‰æ–¹åº“æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¯¹äºåŒ…æå¤šçš„åº”ç”¨æ¥è¯´ï¼Œè‡ªåŠ¨åŒ–æ˜æ˜¾åŠ å¿«äº†ç”Ÿäº§æ•ˆç‡ã€‚

å¼•ç”¨[å½»åº•è§£å†³Webpackæ‰“åŒ…æ€§èƒ½é—®é¢˜â€”â€”manifest.json](https://blog.csdn.net/suhuaiqiang_janlay/article/details/79715969)

## 2. node httpèµ·æœåŠ¡
### httpèµ·æœ¬åœ°æ–‡ä»¶æœåŠ¡

æ–°å»ºæ–‡ä»¶å¤¹ï¼Œç„¶å`npm init`

```bash
npm install http;
npm install fs;
```

```js
var http = require('http');
var fs = require('fs'); //å¼•å…¥æ–‡ä»¶è¯»å–æ¨¡å—
const request = require('request');

var documentRoot = '/Users/tlm/Documents/web-front/test/keep-study/node-test/';
//éœ€è¦è®¿é—®çš„æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ï¼ˆé¡¹ç›®æ‰€åœ¨ä½ç½®çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼‰

var server = http.createServer(function (req, res) {

    var url = req.url;
    //å®¢æˆ·ç«¯è¾“å…¥çš„urlï¼Œä¾‹å¦‚å¦‚æœè¾“å…¥localhost:8888/index.html
    //é‚£ä¹ˆè¿™é‡Œçš„url == /index.html 

    var file = documentRoot + url;


    fs.readFile(file, function (err, data) {
        /*
            ä¸€å‚ä¸ºæ–‡ä»¶è·¯å¾„
            äºŒå‚ä¸ºå›è°ƒå‡½æ•°
                å›è°ƒå‡½æ•°çš„ä¸€å‚ä¸ºè¯»å–é”™è¯¯è¿”å›çš„ä¿¡æ¯ï¼Œè¿”å›ç©ºå°±æ²¡æœ‰é”™è¯¯
                äºŒå‚ä¸ºè¯»å–æˆåŠŸè¿”å›çš„æ–‡æœ¬å†…å®¹
        */
        if (err) {
            res.writeHeader(404, {
                'content-type': 'text/html;charset="utf-8"'
            });
            res.write('<h1>404é”™è¯¯</h1><p>ä½ è¦æ‰¾çš„é¡µé¢ä¸å­˜åœ¨</p>');
            res.end();
        } else {
            res.writeHeader(200, {
                'content-type': 'text/html;charset="utf-8"'
            });
            res.write(data); //å°†index.htmlæ˜¾ç¤ºåœ¨å®¢æˆ·ç«¯
            res.end();

        }

    });



}).listen(8010);
console.log('æœåŠ¡å™¨å¼€å¯æˆåŠŸ');

```
åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ
```bash
node server.js
```
ç„¶åå°±å¯ä»¥åƒsublime textæ’ä»¶èµ·çš„æœåŠ¡ï¼Œæˆ–è€…æ˜¯vscodeä¸­live-serverèµ·çš„æœåŠ¡ä¸€æ ·äº†ã€‚
æ‰“å¼€é¡µé¢http://localhost:8010/index.htmlå¯ç”¨

### httpä»£ç†æœåŠ¡

å¦‚æœç›´æ¥å»è®¿é—®`http://news-at.zhihu.com/api/4/news/before/20190115`æ¥å£å°±ä¼šæŠ¥é”™ï¼Œè·¨åŸŸï¼Œå¦‚æ­¤æˆ‘ä»¬ä½¿ç”¨åˆ›å»ºhttpä»£ç†ï¼ˆå½“ç„¶nginxä»£ç†ä¹Ÿå¯ä»¥å®ç°ï¼‰:

å®‰è£…httpå’Œrequestã€‚

```js
//server.js
var http = require('http');
const request = require('request');

const hostname = '127.0.0.1';
const port = 8010;

// åˆ›å»ºä¸€ä¸ª API ä»£ç†æœåŠ¡
const apiServer = http.createServer((req, res) => {
    const url = 'http://news-at.zhihu.com/api/4' + req.url;
    const options = {
        url: url
    };

    function callback(error, response, body) {
        if (!error && response.statusCode === 200) {
            // è®¾ç½®ç¼–ç ç±»å‹ï¼Œå¦åˆ™ä¸­æ–‡ä¼šæ˜¾ç¤ºä¸ºä¹±ç 
            res.setHeader('Content-Type', 'text/plain;charset=UTF-8');
            // è®¾ç½®æ‰€æœ‰åŸŸå…è®¸è·¨åŸŸ
            res.setHeader('Access-Control-Allow-Origin', '*');
            // è¿”å›ä»£ç†åçš„å†…å®¹
            res.end(body);
        }
    }
    request.get(options, callback);
});
// ç›‘å¬ 8010 ç«¯å£
apiServer.listen(port, hostname, () => {
    console.log(`æ¥å£ä»£ç†è¿è¡Œåœ¨ http://${hostname}:${port}/`);
});
```

åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ
```bash
node server.js
```

æ­¤æ—¶å°±æœ‰ä¸€ä¸ªä»£ç†æ¥å£å¯ç”¨äº†ï¼Œæ­¤æ—¶å‘èµ·è¯·æ±‚å¯ç”¨ã€‚

```js
// jqueryå‘èµ·ajaxè¯·æ±‚
$.ajax({
    url:'http://127.0.0.1:8010/news/before/20190115',
    success:function(res){
        console.log(res);
    },
    error:function(){

    }
})
```

> è¯´æ˜:è¿™ä¸¤ä¸ªæœåŠ¡ä¸€ä¸ªæ˜¯æœ¬åœ°çš„æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ä»£ç†æ¥å£ï¼Œæ‰€ä»¥åŒæ—¶å¯åŒæ—¶å†™åœ¨ä¸€ä¸ªserver.jsã€‚åŒæ—¶å¯åŠ¨æœåŠ¡å¯ç”¨ã€‚

***
> ç–‘é—®ï¼š å¦‚æœä»£ç†æ¥å£ç›‘å¬çš„æ˜¯localhostå°±è¯·æ±‚ä¸å­˜åœ¨ï¼ˆ404ï¼‰ã€‚è€Œhostnameä¸º127.0.0.1çš„æ—¶å€™å°±å¯ä»¥ç”¨ï¼Œæ˜¯ä¸èƒ½å’Œæœ¬åœ°æœåŠ¡ä¸€ä¸ªç«¯å£å—ï¼Ÿ
> æœç„¶ï¼Œæ¢äº†ä»£ç†ç›‘å¬çš„ç«¯å£ä¸è®ºæ˜¯localhostè¿˜æ˜¯127.0.0.1éƒ½å¯ä»¥è¯·æ±‚æˆåŠŸã€‚`url:'http://localhost:8011/news/before/20190115'`

***

>**ç–‘é—®ï¼š** ä¸ºä½•æˆ‘ç”¨expressèµ·çš„åå°æœåŠ¡ï¼Œä»£ç†è½¬æ¥å´è¯·æ±‚ä¸åˆ°å‘¢ï¼Ÿè¦ä¸404ï¼Œè¦ä¸å°±ä¸€ç›´pendingåˆ°failã€‚

> é—®é¢˜è§£å†³ï¼šä¹‹å‰ä¸€ç›´expressä¸€ç›´ç”¨çš„8081ï¼Œæ¢äº†8088åï¼Œå°±å¯ä»¥äº†ï¼Œï¼ˆç«¯å£å·²ç»è¢«å ç”¨äº†ï¼Ÿï¼‰ï¼›
æœ¬åœ°æ–‡ä»¶æœåŠ¡ä¸º`localhost:8010/index.html`, expressèµ·æœåŠ¡ä¸º`localhost:8080/list_user`,ä»£ç†è½¬æ¥ç›‘å¬æ¥å£ä¸º`http://127.0.0.1:8011/list_user`,ajaxè¯·æ±‚æ—¶ï¼Œurlä¸º`http://127.0.0.1:8011/list_user`,è¯·æ±‚æˆåŠŸã€‚ï¼ˆnode server.js;node express/express_demo2.js)

### åŸºç¡€çŸ¥è¯†è¡¥å……
node http serverä¸­æœ‰ä¸ªå‡½æ•°`http.createServer(function(req,res)){}`ï¼›
ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚ï¼Œç¬¬äºŒä¸ªæ˜¯å“åº”ã€‚

ä¸€ä¸ªéå¸¸ç®€å•çš„httpæœåŠ¡ï¼š
```js
const apiServer = http.createServer((req, res) => {
   res.writeHead(200, {'Content-type' : 'text/html'});
   res.write('1414124');
   res.end('<p>Hello World</p>')
}).listen(8010);
```

è¯·æ±‚å¤´æ²¡æœ‰è¿›è¡Œè®¾ç½®ï¼Œåªæœ‰å“åº”ï¼ŒhttpçŠ¶æ€ç ä¸º200ï¼Œ{'Content-Type':'text-plain'}è¿™ä¸ªæ˜¯ä¸ªMIMEæ ‡å‡†çš„æ ¼å¼æè¿°ã€‚ å†…å®¹ç›´æ¥è¾“å‡ºåˆ°é¡µé¢ä¸Šã€‚

è¯»å–æ–‡ä»¶è¾“å‡ºéœ€è¦fs:
```js
var fs = require('fs'); //å¼•å…¥æ–‡ä»¶è¯»å–æ¨¡å—

const apiServer = http.createServer((req, res) => {
    fs.readFile('data1.js', function readData(err, data) {
        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end(data);
    });
}).listen(8010);
```

å‘é€è¯·æ±‚http.request(options[, callback])ï¼š
ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¯·æ±‚å¤´é€‰é¡¹ï¼Œæ—¢ä¸»æœºåã€åŸŸåã€ç«¯å£ã€è¯·æ±‚æ–¹å¼ã€èµ„æºè·¯å¾„ç­‰ç­‰ï¼›

ç¬¬äºŒä¸ªå‚æ•°ä¸ºè¯·æ±‚æˆåŠŸçš„å›è°ƒå‡½æ•°ï¼›

> è¿™ä¸ªèŠ‚å¥æ€ä¹ˆæˆäº†nodeçš„httpäº†ï¼Œæš‚åœï¼Œä»¥åå­¦ä¹ nodeæ—¶å†ç»§ç»­ç ”ç©¶å§ã€‚

## 3. expressèµ·æœåŠ¡

å‚è€ƒï¼š[Node.js Express æ¡†æ¶](http://www.runoob.com/nodejs/nodejs-express-framework.html)

Express æ˜¯ä¸€ä¸ªç®€æ´è€Œçµæ´»çš„ node.js Webåº”ç”¨æ¡†æ¶, æä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§ç‰¹æ€§å¸®åŠ©ä½ åˆ›å»ºå„ç§ Web åº”ç”¨ï¼Œå’Œä¸°å¯Œçš„ HTTP å·¥å…·ã€‚

ä½¿ç”¨ Express å¯ä»¥å¿«é€Ÿåœ°æ­å»ºä¸€ä¸ªå®Œæ•´åŠŸèƒ½çš„ç½‘ç«™ã€‚

Express æ¡†æ¶æ ¸å¿ƒç‰¹æ€§ï¼š

* å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚

* å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚

* å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚

```bash
npm install express --save

npm install body-parser --save //node.js ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç† JSON, Raw, Text å’Œ URL ç¼–ç çš„æ•°æ®ã€‚
npm install cookie-parser --save // è¿™å°±æ˜¯ä¸€ä¸ªè§£æCookieçš„å·¥å…·ã€‚é€šè¿‡req.cookieså¯ä»¥å–åˆ°ä¼ è¿‡æ¥çš„cookieï¼Œå¹¶æŠŠå®ƒä»¬è½¬æˆå¯¹è±¡ã€‚
npm install multer --save // node.js ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç† enctype="multipart/form-data"ï¼ˆè®¾ç½®è¡¨å•çš„MIMEç¼–ç ï¼‰çš„è¡¨å•æ•°æ®
```

æ•´ç¯‡å®ä¾‹éƒ½å€Ÿé‰´äºèœé¸Ÿæ•™ç¨‹ä¸­çš„ï¼š


#### åŸºæœ¬å†™æ³•ï¼š

```js
//express_demo.js æ–‡ä»¶
var express = require('express');
var app = express();

app.get('/', function (req, res) {
   res.send('Hello World');
})

var server = app.listen(8081, function () {

  var host = server.address().address
  var port = server.address().port

  console.log("åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s", host, port)

})
```

#### å¯ä»¥é…ç½®ä¸åŒçš„è·¯ç”±æ¥å®ç°ä¸åŒçš„æ¥å£urlï¼š`app.get('/list'...`

#### é™æ€æ–‡ä»¶è°ƒç”¨ä½¿ç”¨`app.use(express.static('public'));`pubilcç›®å½•ä¸‹é¢çš„å›¾ç‰‡ã€é¡µé¢ç­‰é™æ€æ–‡ä»¶å°±å¯ä»¥è®¿é—®äº†

> æ­¤æ—¶åœ¨publicä¸­çš„index.htmlä¸­çš„è¯·æ±‚ï¼Œå°±å¯ä»¥ä¸ä½¿ç”¨ä»£ç†æ¥è®¿é—®expressèµ·çš„æœåŠ¡çš„æ¥å£äº†ã€‚å½“ç„¶ä»£ç†è½¬æ¥ä¹Ÿå¯ä»¥æˆåŠŸ

```js
// http://localhost:8088/index.html
$.ajax({
    // url:'http://127.0.0.1:8011/list_user',
    url:'http://localhost:8088/list_user',
    type:'get',
    data: {a:11},
    success:function(res){
        console.log(res);
    },
    error:function(){

    }
})
```

å›¾ç‰‡ç›®å½•ä¸º`/public/images/dog.jpg`
è®¿é—®å›¾ç‰‡åŠ`http://localhost:8088/images/dog.jpg`

#### è·å–å®¢æˆ·ç«¯è¯·æ±‚çš„å‚æ•°æ˜¯`req.query`
#### éœ€æ³¨æ„åœ¨æ ¹ç›®å½•ä¸‹å¯åŠ¨expressï¼Œå¦åˆ™pubilcä¸­çš„å†…å®¹èµ·ä¸èµ·æ¥`node express/express_server.js`
#### app.get(),app.post()
postè¯·æ±‚éœ€è¦ï¼š

```js
var bodyParser = require('body-parser');
// åˆ›å»º application/x-www-form-urlencoded ç¼–ç è§£æ
var urlencodedParser = bodyParser.urlencoded({ extended: false })
app.post('/process_post', urlencodedParser, function (req, res) {})
```

// å®è·µè¯æ˜ä¸‹é¢è¿™å¥ä»£ç ä¸å†™ä¹Ÿæ˜¯å¯ä»¥çš„
```js
app.get('/indexpost.htm', function (req, res) {
   res.sendFile( __dirname + "/" + "indexpost.htm" );
})
```

#### æ–‡ä»¶ä¸Šä¼ 
```js
var fs = require("fs");

var bodyParser = require('body-parser');
var multer  = require('multer');

app.use(bodyParser.urlencoded({ extended: false }));
app.use(multer({ dest: '/tmp/'}).array('image'));

app.post('/file_upload', function (req, res) {

   console.log(req.files[0]);  // ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯

   var des_file = __dirname + "/" + req.files[0].originalname;
   fs.readFile( req.files[0].path, function (err, data) {
        fs.writeFile(des_file, data, function (err) {
         if( err ){
              console.log( err );
         }else{
               response = {
                   message:'File uploaded successfully',
                   filename:req.files[0].originalname
              };
          }
          console.log( response );
          res.end( JSON.stringify( response ) );
       });
   });
})

```

#### cookieç®¡ç†

```js
//  è·å–å®¢æˆ·ç«¯çš„cookieä¿¡æ¯
var express      = require('express')
var cookieParser = require('cookie-parser')
var util = require('util');

var app = express()
app.use(cookieParser())

app.get('/', function(req, res) {
    console.log("Cookies: " + util.inspect(req.cookies));
})

app.listen(8081)
```

> åè¨€ï¼š ç”±äºåœ¨vueæˆ–è€…reactçš„é¡¹ç›®ä¸­éƒ½æœ‰webpackæ­å»ºçš„æœåŠ¡ï¼Œæ‰€ä»¥è½¬è€Œæƒ³çœ‹ä¸€ä¸‹è¿™äº›æœåŠ¡ç¨å¾®å¾€å‰ä¸€ç‚¹çš„ä½¿ç”¨ï¼Œæ‰€ä»¥å°±è¿›è¡Œäº†ç®€å•çš„æŸ¥è¯¢ï¼Œå¹¶è·Ÿç€å®è·µä¸€éï¼Œç†è§£è¿˜ä¸é€å½»ï¼Œä½†æ˜¯ä¹Ÿç®—äº†è§£äº†ã€‚åé¢æœ‰æ—¶é—´æ·±å…¥nodeã€‚ã€‚ã€‚
